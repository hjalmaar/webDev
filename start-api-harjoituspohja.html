<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
  </head>
  <body>
    <ul>
      <li><a href="start-api-harjoituspohja.html">Koti</a></li>
      <li><a href="#news">Tietoja</a></li>
      <li style="float: right" class="active logout"><a href="">Logout</a></li>
    </ul>

    <!-- <div id="app"></div> -->

    <div class="user">Hei kirjautunut käyttäjä: <span id="name">NIMI TÄHÄN</span>!</div>

    
    <div class="forms">
      <div style="flex: 1">
        <h3>GET and DELETE</h3>


        <p>
          Hae käyttäjän tiedot painamalla alla olevaa nappia. Tämä hakee tiedot sekä luo taulukon
          tbody osan. Jokaiselle riville luodaan nappula. Info hakee yksittäisen rivin tiedot ja
          avaa dialogin. Delete poistaa yksittäisen rivin ja varmistaa tapahtuman confirm()
          metodilla.
        </p>

        <pre><code>
          # Get all users (requires token)
          GET http://127.0.0.1:3000/api/users
          
          # Get user by id (requires token)
          GET http://127.0.0.1:3000/api/users/:id
          
          # Delete user (requires token)
          DELETE http://127.0.0.1:3000/api/users/:id
          </code></pre>

        <table class="styled-table">
          <thead>
            <tr>
              <th>User Name</th>
              <th>User Level</th>
              <th>Info</th>
              <th>Delete</th>
              <th>ID</th>
            </tr>
          </thead>
          <tbody class="tbody">
        </table>

        <button class="get_users">Hae users tiedot</button>
      </div>
      <div style="flex: 1">
        <h3>Update your user information </h3>

        <pre><code>
          
          # Update user's own data (requires token)
          PUT http://127.0.0.1:3000/api/users/
          content-type: application/json
          
          {
            "username": "test-update4",
            "password": "test-pw-update4",
            "email": "update4@example.com"
          }
          </code></pre>

          <form id="updateUserForm" class="update-form">
            <label for="username">User Name:</label><br>
            <input type="text" id="username" name="username" required><br>
            <label for="email">Email:</label><br>
            <input type="email" id="email" name="email" required><br>
            <label for="password">Password:</label><br>
            <input type="password" id="password" name="password" required><br>
            <button type="submit" class="update-button">Update User</button>
          </form>
          
          <H2>Here you can add medications that you need to take</H2>
          <form id="medicationForm">
            <!-- Assuming the user_id will be added programmatically and not by the user -->
            <input type="hidden" id="user_id" name="user_id">
        
            <label for="medname">Medication Name:</label><br>
            <input type="text" id="med_name" name="med_name" required><br>
        
            <label for="dosage">Dosage:</label><br>
            <input type="text" id="dosage" name="dosage" required><br>
        
            <label for="frequency">Frequency:</label><br>
            <input type="text" id="frequency" name="frequency" required><br>
        
            <label for="start_date">Start Date:</label><br>
            <input type="date" id="start_date" name="start_date" required><br>
        
            <label for="end_date">End Date:</label><br>
            <input type="date" id="end_date" name="end_date" required><br>
        
            <button type="submit">Submit Medication</button>
        </form>
      </div>
    </div>
    <h2>Add Entry</h2>
    <form id="addEntryForm">
        <label for="entry_date">Entry Date:</label><br>
        <input type="date" id="entry_date" name="entry_date" required><br>

        <label for="mood">Mood:</label><br>
        <input type="text" id="mood" name="mood" required><br>

        <label for="weight">Weight:</label><br>
        <input type="number" id="weight" name="weight" step="0.01" required><br>

        <label for="sleep_hours">Sleep Hours:</label><br>
        <input type="number" id="sleep_hours" name="sleep_hours" step="0.1" required><br>

        <label for="notes">Notes:</label><br>
        <textarea id="notes" name="notes" rows="4" required></textarea><br>

        <button type="submit">Submit Entry</button>
    </form>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Entry Date</th>
          <th>Mood</th>
          <th>Weight</th>
          <th>Sleep Hours</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody class="entries-tbody">
        <!-- Entries will be populated here by JavaScript -->
      </tbody>
    </table>
    <h2>Your medications should popup here</h2>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Medication Name</th>
          <th>Dosage</th>
          <th>Frequency</th>
          <th>Start Date</th>
          <th>End Date</th>
        </tr>
      </thead>
      <tbody class="medications-tbody">
        <!-- Medication entries will be populated here by JavaScript -->
      </tbody>
      <button id="getMedication">Get Medication Info</button>
    </table>
    
    
    <dialog class="info_dialog">
      <p>
        <!-- tänne haetaan yksittäinen valittu käyttäjät -->      
        <div>UserID: <span>Id</span></div>
        <div>UserName: <span>Username</span></div>
        <div>Email: <span>Email</span></div>
        <div>Role: <span>Role</span></div> 
      </p>
      <button autofocus>Close</button>
    </dialog>

    <p>Hae käyttäjän (user: 1) entires tiedot ja console.log</p>
    <pre>
      # Get entries by id
      GET http://localhost:3000/api/entries/:id
    </pre>
    <button class="get_entry">Hae (user:1) entries</button>

    <script type="module" src="/start-api-harjoituspohja.js"></script>

  </body>
</html>